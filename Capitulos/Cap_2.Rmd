\section {Capítulo 2 Disponibilidad de la información}


\subsection{Encuesta Nacional de Ocupación y Empleo}

Las estimaciones demográficas son tomadas de los factores de expansión de la Encuesta Nacional de Ocupación y Empleo (ENOE)


Notas de limpieza de la información. Para los datos de secciones electorales 2012 se encontraron 37 secciones sin datos de votación aunque si lista nominal. Para propósitos
Existen 623 casos donde la sección reporta una votación mayor a 100 porciento


\subsection{Datos Electorales}

Se disponen de los datos electorales de los años 2000, 2006 y 2012. Sin embargo sólo se cuenta con datos de lista nominal para los años 2006 y 2012 por lo que el análisis de participación electoral se reduce a estos dos periodos. Sin embargo se complementan dichos periodos con votaciones estatales para periodos posteriores en los estudios de caso de Guadalajara y Puebla. 


\subsubsection{Elecciones Federales 2012}

Es una elección concurrente para:
1. Presidente de la República
2. 128 Senadores
3, 500 Diputados Federales

Coaliciones 

Compromiso por México: PRI, PVEM, PANAL
PRD, Movimiento Ciudadano


```{r Mapa participación electoral Estatal 2006 , echo = FALSE, cache = TRUE}
##################################  2006  ###############################
P2006Secc<-fread(input = "http://siceef.ine.mx/BD/Presidente2006Seccion.csv", 
                 sep = ",", encoding = "UTF-8")
P2006Secc$CVE_SECC <-str_c(str_pad(P2006Secc$ID_ESTADO, width =2, "left", "0"),         #Estado Sección
                         str_pad(P2006Secc$SECCION, width = 4, "left", "0"))
P2006Secc$CV_MUN   <- str_c(str_pad(P2006Secc$ID_ESTADO, width = 2, "left", "0"),       #Estado Municipio
                         str_pad(P2006Secc$ID_MUNICIPIO, width = 3, "left", "0"))
P2006Secc$CV_TODO  <- str_c(str_c(str_pad(P2006Secc$ID_ESTADO, width = 2, "left", "0"), #Estado, Municipio, Sección
                         str_pad(P2006Secc$ID_MUNICIPIO, width = 3, "left", "0")), 
                         str_pad(P2006Secc$SECCION, width = 4, "left", "0"))
P2006Secc<-filter(P2006Secc, MUNICIPIO != "Voto en el Extranjero")
P2006Mun<-P2006Secc %>% #2442 Municipios 
  group_by(CVUN =as.factor(P2006Secc$CV_MUN)) %>%
  summarise(TOTAL = sum(TOTAL_VOTOS, na.rm =TRUE),
            Lista_Nominal = sum (LISTA_NOMINAL, na.rm = TRUE),
            PAN = sum(PAN, na.rm = TRUE),
            APM = sum(APM, na.rm = TRUE),
            PBT = sum(PBT, na.rm = TRUE),
            NVA_ALIANZA   = sum(NVA_ALIANZA, na.rm = TRUE),
            ASDC          = sum(ASDC, na.rm = TRUE), 
            CANCELADOS    = sum(NUM_VOTOS_CAN_NREG, na.rm = TRUE),
            NULOS         = sum(NUM_VOTOS_NULOS, na.rm = TRUE),
            Num_Secciones = length(unique(na.omit(SECCION))),
            Num_Casillas  = length(unique(na.omit(CASILLA))),
            Municipio     = unique(MUNICIPIO), 
            ID_Municipio  = unique(ID_MUNICIPIO))
P2006Mun$CVE_ENT <- str_sub(string = P2006Mun$CVUN, start = 1, end = 2)
################################### 2012  #######################################
P2012Secc<-fread(input = "http://siceef.ine.mx/BD/Presidente2012Seccion.csv", 
                 sep = ",", encoding = "Latin-1")
P2012Secc$CVE_SECC<-str_c(str_pad(P2012Secc$ID_ESTADO, width =2, "left", "0"),
                          str_pad(P2012Secc$SECCION, width = 4, "left", "0"))
P2012Secc$CV_MUN <- str_c(str_pad(P2012Secc$ID_ESTADO, width = 2, "left", "0"),
                          str_pad(P2012Secc$ID_MUNICIPIO, width = 3, "left", "0"))
P2012Secc$CV_TODO  <- str_c(str_c(str_pad(P2012Secc$ID_ESTADO, width = 2, "left", "0"), #Estado, Municipio, Sección
                         str_pad(P2012Secc$ID_MUNICIPIO, width = 3, "left", "0")), 
                         str_pad(P2012Secc$SECCION, width = 4, "left", "0"))
P2012Mun<-P2012Secc %>%   #2447
  group_by(CVUN =as.factor(P2012Secc$CV_MUN)) %>%
  summarise(TOTAL = sum(TOTAL_VOTOS, na.rm =TRUE),
            Lista_Nominal = sum (LISTA_NOMINAL, na.rm = TRUE),
            PAN  = sum(PAN, na.rm = TRUE),
            PRI  = sum(PRI, na.rm = TRUE),
            PRD  = sum(PRD, na.rm = TRUE),
            PVEM = sum(PVEM, na.rm = TRUE),
            PT   = sum(PT, na.rm = TRUE),
            MC   = sum(MC, na.rm = TRUE),
            NVA_ALIANZA   = sum(NVA_ALIANZA, na.rm = TRUE),
            PRI_PVEM      = sum(PRI_PVEM, na.rm = TRUE),
            PRD_PT_MC     = sum(PRD_PT_MC, na.rm = TRUE),
            PRD_PT        = sum(PRD_PT, na.rm = TRUE),
            PRD_MC        = sum(PRD_MC, na.rm = TRUE),
            PT_MC         = sum(PT_MC, na.rm = TRUE),
            CANCELADOS    = sum(NUM_VOTOS_CAN_NREG, na.rm = TRUE),
            NULOS         = sum(NUM_VOTOS_NULOS, na.rm = TRUE),
            Num_Secciones = length(unique(na.omit(SECCION))),
            Num_Casillas  = length(unique(na.omit(CASILLAS))),
            Municipio     = unique(na.omit(MUNICIPIO)), 
            ID_Municipio  = unique(ID_MUNICIPIO))
P2012Mun$CVE_ENT <- str_sub(string = P2012Mun$CVUN, start = 1, end = 2)
#####################################################################################################
#shapefiles con formas estatales
#agregar datos a nivel estatal
#tabla con resultados agregados por estado, participación electoral y principales partidos
###########################   Datos 2006 Estatal  #########################################
P2006Edo<- P2006Mun %>% group_by(CVE_ENT = as.factor(CVE_ENT)) %>% 
  summarise(TOTAL = sum(TOTAL, na.rm = TRUE),
            Lista_Nominal = sum (Lista_Nominal, na.rm = TRUE),
            PAN           = sum(PAN, na.rm = TRUE),
            APM           = sum(APM, na.rm = TRUE),
            PBT           = sum(PBT, na.rm = TRUE),
            NVA_ALIANZA   = sum(NVA_ALIANZA, na.rm = TRUE),
            ASDC          = sum(ASDC, na.rm = TRUE),
            CANCELADOS    = sum(CANCELADOS, na.rm = TRUE),
            NULOS         = sum(NULOS, na.rm = TRUE),
            Num_Secciones = sum(Num_Secciones, na.rm = TRUE),
            Num_Casillas  = sum(Num_Casillas, na.rm = TRUE)
            )
P2006Edo$Por_Part <- (P2006Edo$TOTAL/P2006Edo$Lista_Nominal) * 100 #porcentajes. 
P2006Edo$PAN_por <- (P2006Edo$PAN/P2006Edo$TOTAL) * 100
P2006Edo$APM_por <- (P2006Edo$APM/P2006Edo$TOTAL) * 100
P2006Edo$PBT_por <- (P2006Edo$PBT/P2006Edo$TOTAL) * 100
P2006Edo$NVA_ALIANZA_por <- (P2006Edo$NVA_ALIANZA/P2006Edo$TOTAL) * 100
P2006Edo$ASDC_por <- (P2006Edo$ASDC/P2006Edo$TOTAL) * 100

###########################     Cartografía   ###################################
Estados <- readOGR("C:/Proyectos R/TAFA-Book/Datos/Geográficos/Estados/areas_geoestadisticas_estatales.shp",
                   "areas_geoestadisticas_estatales", encoding = "UTF8") #cartografía estatal
Estados_Map <- fortify(Estados, region = "CVE_ENT" )
Estados_Map$CVE_ENT <-  Estados_Map$id
Estados_Map <- left_join(Estados_Map, P2006Edo, by = "CVE_ENT") #96 mb 
###########################     Mapa          ###################################
Part_Edo_Map <- ggplot() +
  geom_polygon(data = Estados_Map, aes(fill = Por_Part, 
                                       x = long, 
                                       y = lat, 
                                       group = group)) +
  geom_path(data = Estados_Map, aes( x= long, 
                                     y = lat, group = group),
            color = "white", size = 0.2) +
  coord_equal() +
  theme_map() +
  labs( x = NULL,
        y = NULL, NULL, 
        title = "Paricipación Electoral Estatal 2006") +
  theme(legend.position = "bottom") +
  scale_fill_viridis(
    option = "viridis",
    name = "Porcentaje de participación electoral 2016",
    discrete = T,
    direction = -1,
    guide = guide_legend(
      keyheight = unit(5, units = "mm"),
      title.position = 'top',
      reverse = T
    ))
Part_Edo_Map
```

```{r Mapa participación electoral Estatal 2012 , echo = FALSE, cache = TRUE}

#########################   2012 Estatal      ##################################################
P2012Edo<- P2012Mun %>% group_by(CVE_ENT = as.factor(CVE_ENT)) %>% 
  summarise(TOTAL = sum(TOTAL, na.rm = TRUE),
            Lista_Nominal = sum (Lista_Nominal, na.rm = TRUE),
            PAN           = sum(PAN, na.rm = TRUE),
            PRI           = sum(PRI, na.rm = TRUE),
            PRD           = sum(PRD, na.rm = TRUE),
            PVEM          = sum(PVEM, na.rm = TRUE),
            PT            = sum(PT, na.rm = TRUE),
            MC            = sum(MC, na.rm = TRUE),
            NVA_ALIANZA   = sum(NVA_ALIANZA, na.rm = TRUE),
            PRI_PVEM      = sum(PRI_PVEM, na.rm = TRUE),
            PRD_PT_MC     = sum(PRD_PT_MC, na.rm = TRUE), 
            PRD_PT        = sum(PRD_PT, na.rm = TRUE),
            PRD_MC        = sum(PRD_MC, na.rm = TRUE),
            CANCELADOS    = sum(CANCELADOS, na.rm = TRUE),
            NULOS         = sum(NULOS, na.rm = TRUE),
            Num_Secciones = sum(Num_Secciones, na.rm = TRUE),
            Num_Casillas  = sum(Num_Casillas, na.rm = TRUE),
            Num_Municipios = length(unique(na.omit(Municipio)))
            )
P2012Edo$Por_Part <- (P2012Edo$TOTAL/P2012Edo$Lista_Nominal) * 100 #porcentajes. 
P2012Edo$PAN_por  <- (P2012Edo$PAN/P2012Edo$TOTAL) * 100
P2012Edo$PRI_por  <- (P2012Edo$PRI/P2012Edo$TOTAL) * 100
P2012Edo$PRD_por  <- (P2012Edo$PRD/P2012Edo$TOTAL) * 100
P2012Edo$PVEM_por <- (P2012Edo$PVEM/P2012Edo$TOTAL) * 100
P2012Edo$PT_por   <- (P2012Edo$PT/P2012Edo$TOTAL) * 100
P2012Edo$MC_por   <- (P2012Edo$MC/P2012Edo$TOTAL) * 100
P2012Edo$NVA_ALIANZA_por  <- (P2012Edo$NVA_ALIANZA/P2012Edo$TOTAL) * 100
P2012Edo$PRI_PVEM_por     <- (P2012Edo$PRI_PVEM/P2012Edo$TOTAL) * 100
P2012Edo$PRD_PT_MC_por    <- (P2012Edo$PRD_PT_MC/P2012Edo$TOTAL) * 100
P2012Edo$PRD_PT_por       <- (P2012Edo$PRD_PT/P2012Edo$TOTAL) * 100
P2012Edo$PRD_MC_por       <- (P2012Edo$PRD_MC/P2012Edo$TOTAL) * 100



```


```{r Mapa participación electoral Municipal 2006 , echo = FALSE, cache = TRUE}

```


